{strip}
	{if $results}
    	<div id="consultarGridHead"></div>
        <div id="consultarGrid">
            <table cellspacing="0" cellpadding="0" style="width:{$widthTable}" class="libsConsultarTbl">
              <thead>
                <tr>
                  {if $showCheckBox}
                    <th align="center" style="width:15px"></th>
                  {/if}
                  {foreach $colunas as $coluna}
                    <th valign="middle"{if $coluna.align} align="{$coluna.align}"{/if} nowrap="nowrap">
                    <div class="flHead" style="{if $coluna.align}text-align:{$coluna.align};{/if}">
                        {if $coluna.sum}
                            <a href="javascript:;" onclick="Consultar.sum(this, '{$coluna.sum}')" class="sum" title="Somar esta coluna"></a>
                        {/if}
                        
                        {if $coluna.orderBy}
                            <input type="hidden" id="order_{$coluna.orderBy}" name="order[{$coluna.orderBy}]" value="{$coluna.orderType}" />
                            
                            <a href="javascript:;" orderby="{$coluna.orderBy}" class="consultarOrderAction">
                                {$coluna.label}
                            </a>
                            
                            {* se tiver ordenando por essa coluna, imprime uma setinha indicativa *}
                            <a href="javascript:;" class="consultarOrderRemove consultarOrder" title="Remover ordenação"{if !$coluna.showRmvOrder} style="display:none"{/if}></a>
                            <a href="javascript:;" class="{if !$coluna.orderType}consultarOrderCanDo{else}{$coluna.orderType}{/if} consultarOrderAction consultarOrderType consultarOrder"></a>
                        {else}
                            {$coluna.label}
                        {/if}
                    </div>
                    </th>
                  {/foreach}
                  {if $countActions}
                    <th style="width:{$countActions * 28}px"></th>
                  {/if}
                </tr>
                {* ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------- *}
                <tr>
                  {if $showCheckBox}
                    <th align="center" style="width:15px" class="flHeadHide"></th>
                  {/if}
                  {foreach $colunas as $coluna}
                    <th valign="middle"{if $coluna.align} align="{$coluna.align}"{/if}{if $coluna.width} style="width:{$coluna.width}"{/if} nowrap="nowrap" class="flHeadHide">
                    	<div class="flHeadHide">
                        {if $coluna.sum}
                            <a href="javascript:;" onclick="Consultar.sum(this, '{$coluna.sum}')" class="sum" title="Somar esta coluna"></a>
                        {/if}
                        
                        {if $coluna.orderBy}
                            <a href="javascript:;">
                                {$coluna.label}
                            </a>
                            
                            {* se tiver ordenando por essa coluna, imprime uma setinha indicativa *}
                            <a href="javascript:;" class="" title="Remover ordenação"{if !$coluna.showRmvOrder} style="display:none"{/if}></a>
                            <a href="javascript:;" class="{$coluna.orderType} consultarOrderAction consultarOrderType "{if !$coluna.showRmvOrder} style="display:none"{/if}></a>
                        {else}
                            {$coluna.label}
                        {/if}
                        </div>
                    </th>
                  {/foreach}
                  {if $countActions}
                    <th style="width:{$countActions * 28}px" class="flHeadHide"></th>
                  {/if}
                </tr>
                
              </thead>
              <tbody>
              {foreach $results as $id => $result}
                <tr id="tr_{$id}">
                    {if $showCheckBox}
                        <td style="width:15px">
                            <input type="checkbox" name="ids[]" id="consultar_checbox_{$id}" value="{$id}" onclick="Consultar.checkInput($(this))" />
                            <input type="hidden" name="displayedIds[]" value="{$id}" />
                        </td>
                    {/if}
                    
                    {foreach $colunas as $keyColuna => $coluna}
                        {$valor = $result.columns[$keyColuna]}
                        <td class="dados"{if $coluna.align} align="{$coluna.align}"{/if}{if $showCheckBox} onclick="Consultar.checkInput($(this).up('tr').down('input'), true)"{/if} style="{if $coluna.width}width:{$coluna.width};{/if}{if $result.style[$keyColuna]}{$result.style[$keyColuna]}{/if}">
                            <div>
                    	{if $coluna.editable}
                       		<input type="{$coluna.editable.type}" name="{$coluna.editable.name}[{$id}]" value="{$valor}" style="width:98%" />
                        {else}
                            {if $coluna.href}
                                 <a href="{$result.href[$keyColuna]}" class="maisInfo"
                                 
                                {if $coluna.hs}
                                    {$result.onckick="hs.lang.titulo='{$result.hs[$keyColuna].title|addslashes}'; return hs.htmlExpand(this, 
                                        {
                                            {if $coluna.hs.minWidth}minWidth: {$coluna.hs.minWidth},{/if}
                                            {if $coluna.hs.minHeight}minHeight: {$coluna.hs.minHeight},{/if}
                                            {if $coluna.hs.width}width: {$coluna.hs.width},{/if}
                                            {if $coluna.hs.height}height: {$coluna.hs.height},{/if}
                                            {if $coluna.hs.maxHeight}maxHeight: {$coluna.hs.maxHeight},{/if}
                                            {if $coluna.hs.maxHeight}maxHeight: {$coluna.hs.maxHeight},{/if}
                                            objectType: 'iframe'
                                        })"}
                                {/if}
								
								{if $result.target}target="{$result.target}"{/if}
                                
                                {if $result.onckick}onclick="{$result.onckick}"{/if}
								
                                >
                            {/if}
                            
                            {if is_array($coluna.image) && $value}
                                <img src="{$valor}"{foreach $coluna.image as $attrN => $attrV} {$attrN}="{$attrV}"{/foreach} />
                            {else}
                                {$valor}
                            {/if}
                            
                            {if $coluna.href}
                                </a>
                            {/if}
                    	{/if}
                            </div>
                        </td>
                    {/foreach}
                    
                    {if $countActions}
                    <td align="center" class="actions" nowrap="nowrap" style="width:{$countActions * 28}px">
                        {foreach $result.actions as $action}
                            {if $action}
                                <a class="{$action.class}"
                                
                                title="{$action.label}"
                                
                                href="{if $action.href}{$action.href}{else}javascript:;{/if}"
                                
                                {if $action.ajax}
                                    {$action.onckick="Consultar.action_ajax({
										to: '{$action.ajax.to}',
										msgConfirmacao: '{$action.ajax.msgConfirmacao|addslashes}',
										{if $result.ajax.reload}reload: true{/if}
									});"}
                                {elseif $action.hs}
                                    {$action.onckick="hs.lang.titulo='{$action.hs.title|addslashes}'; return hs.htmlExpand(this, 
                                        {
                                            {if $action.hs.minWidth}minWidth: {$action.hs.minWidth},{/if}
                                            {if $action.hs.minHeight}minHeight: {$action.hs.minHeight},{/if}
                                            {if $action.hs.width}width: {$action.hs.width},{/if}
                                            {if $action.hs.height}height: {$action.hs.height},{/if}
                                            {if $action.hs.maxHeight}maxHeight: {$action.hs.maxHeight},{/if}
                                            {if $action.hs.maxHeight}maxHeight: {$action.hs.maxHeight},{/if}
                                            objectType: 'iframe'
                                        })"}
                                {/if}
                                
                                {if $action.target}target="{$action.target}"{/if}
                                
                                {if $action.onckick}onclick="{$action.onckick}"{/if}
                                
								{if !$action.ajax && !$action.hs && !$action.onckick && !$action.target}
                                    onclick="FRAME_TOP.loading[ IFRAME_ID ].show();"
                                {/if}
                                
                                ></a>
                            {/if}
                        {/foreach}
                    </td>
                    {/if}
                </tr>
                {if $result.checked}<script type="text/javascript">Consultar.checkInput($('sisainen_checbox_{$id}'), true);</script>{/if}
              {/foreach}
              </tbody>
            </table>
        </div>
        {if $showSum || count($paginacao.pages) gt 1}
        <div id="rodape">
            <div id="resultado-busca">
            {if $showSum}
                {foreach $showSum as $label => $soma}
                <p class="somas">Soma de "{$label}": <span>{$soma}</span></p>
                <img src="{$urlIMG}/sisainen/divisa-somas.png" alt="" />
                {/foreach}
            {/if}
                <div class="paginacao">
                    {if count($paginacao.pages) gt 1}
                        <div class="navegacao">
                            <ul>
                                <li><a{if $paginacao.currpage != 1} href="{$paginacao.previous}"{/if} class="anterior{if $paginacao.currpage == 1} disabled{/if}"></a></li>
                                {foreach $paginacao.pages as $pagina => $link}
                                    {if $pagina == $paginacao.currpage}
                                        <li class="atual"><a>{$pagina}</a></li>
                                    {else}
                                        <li class="pageNun"><a href="{$link}">{$pagina}</a></li>
                                    {/if}
                                {/foreach}
                                <li><a href="{$paginacao.next}" class="proximo{if $paginacao.currpage == $paginacao.IndTotal} disabled{/if}"></a></li>
                            </ul>
                        </div>
                    {/if}
                    {if $registros.qtd gt 15}
                        <div class="n_por_pagina" style="width:170px">
                            <div id="estados-newsletter">
                              <img src="{$urlIMG}/sisainen/estado-cima.png" class="bordas" alt="" />
                                <ul style="display:none" id="mudarQtdPaginacao">
                                    <li><img src="{$urlIMG}/sisainen/estado-cima.png" alt="" style="" /></li>
                                    <li><a href="javascript:;">45</a></li>
                                    <li><a href="javascript:;">30</a></li>
                                    <li><a href="javascript:;">15</a></li>
                                </ul>
                                <a href="javascript:;" id="estado-selecionado">
                                    <span>{$n_paginas}</span>
                                </a>
                                <input type="hidden" name="filtro[n_paginas]" value="{$n_paginas}" />
                              <img src="{$urlIMG}/sisainen/estado-baixo.png" class="bordas" alt="" />
                            </div>
                            <p class="total-resultados" style="margin-left:0 !important;">por página</p>
                       </div>
                   {/if}
                   {if $paginacao}
                       <div id="totalReg" class="totalReg">
                            {if $registros.qtd}
                            <p class="total-resultados">Exibindo registro {$registros.inicio} à {$registros.fim} de um total de {$registros.qtd}</p>
                            {else}
                            <p class="total-resultados">Foi encontrado 1 registro.</p>
                            {/if}
                       </div>
                   {/if}
                </div>
            </div>
        </div>
        {/if}
    {else}
    <div id="no_rows_msg">{$noRows}</div>
    {/if}
{/strip}